import { OtherProject } from '../../../types/resume';

export const crmGroupTemplateProject: OtherProject = {
  name: 'CRM 그룹템플릿 개발',
  company: '(주) 아임웹',
  period: '2025.07 ~ 2025.11',
  description:
    'CRM 알림톡 캠페인에 그룹템플릿 기능 추가. 실시간 미리보기 및 변수 입력 UI 개선으로 캠페인 생성 시간 단축.',
  tasks: [
    '그룹템플릿 시스템 추가: 기본 제공 템플릿 선택 시 즉시 사용 가능하도록 구현',
    '실시간 미리보기: hover 시 템플릿 미리보기, 변수 입력 시 실시간 반영',
    '변수 입력 UI 개선: 데이터 연결 + 대체 텍스트 입력을 아코디언 형태로 재설계',
    '레거시 변수 데이터 정규화: 기존 배열 형식을 객체 구조로 변환',
    '캠페인 생성 플로우 버그 수정: 템플릿 선택 후 변수 초기화 문제 해결',
  ],
  results: [
    { text: '캠페인 생성 시간', highlight: '평균 10분 → 3분으로 70% 단축' },
    { text: '템플릿 선택 오류', highlight: '주 5건 → 0건으로 감소' },
    { text: '변수 설정 UX', value: '사용자 만족도 85% 달성' },
  ],
  troubleShooting: [
    {
      problem:
        '기존에는 커스텀 템플릿만 지원했는데, 그룹템플릿(기본 제공 템플릿)을 추가해야 했습니다. 하지만 그룹템플릿의 변수 데이터는 레거시 형식인 배열(예: ["고객명", "쿠폰명"])로 저장되어 있었고, 커스텀 템플릿은 객체 구조(예: { "고객명": { key: "customerName", value: "홍길동" } })로 저장되어 있었습니다. 두 형식을 통합하지 않으면 미리보기와 변수 입력 UI가 제대로 동작하지 않았습니다.',
      solution:
        '데이터 정규화 함수를 만들어 레거시 배열 형식을 객체 구조로 변환했습니다. 그룹템플릿의 변수 배열(["고객명", "쿠폰명"])을 받아서 매핑 테이블을 참조하여 { "고객명": { key: "customerName", value: "" }, "쿠폰명": { key: "couponName", value: "" } } 형태로 정규화했습니다. 이렇게 하면 미리보기 컴포넌트에서 두 템플릿 타입을 동일하게 처리할 수 있습니다.',
      result:
        '그룹템플릿과 커스텀 템플릿을 구분 없이 동일한 미리보기 UI로 표시할 수 있게 되었습니다. 레거시 데이터 마이그레이션 없이도 기존 데이터를 활용할 수 있어 개발 기간이 2주 단축되었습니다.',
    },
    {
      problem:
        '사용자가 템플릿을 hover할 때 미리보기를 보여주고, 템플릿을 선택하면 해당 템플릿의 내용으로 폼이 채워져야 했습니다. 하지만 hover 상태와 선택 상태를 동시에 관리하면서 서버에서 템플릿 데이터를 조회하니 상태 동기화가 복잡했습니다. 특히 hover 중에 다른 템플릿을 선택하면 미리보기가 잘못된 템플릿을 표시하는 버그가 발생했습니다.',
      solution:
        'Jotai로 hover 상태를 전역 관리하고, 미리보기 컴포넌트에서 우선순위 로직을 구현했습니다. hover된 템플릿이 있으면 해당 데이터를 먼저 표시하고, 없으면 선택된 템플릿의 데이터를 표시하도록 조건부 렌더링했습니다. React Query로 필요한 데이터만 선택적으로 조회하여 불필요한 API 호출을 방지했습니다.',
      result:
        'hover 시 즉시 미리보기가 표시되고, 템플릿 선택 시 정확한 데이터가 반영됩니다. 상태 동기화 버그가 완전히 해결되었고, API 호출 횟수가 50% 감소하여 페이지 반응 속도가 개선되었습니다.',
    },
    {
      problem:
        '기존 변수 입력 UI는 모든 변수가 한 번에 펼쳐져 있어서 변수가 5개 이상일 때 스크롤이 길어지고 어떤 변수를 수정 중인지 파악하기 어려웠습니다. 또한 "데이터 연결"과 "대체 텍스트" 입력 필드가 분리되어 있지 않아 사용자가 혼란스러워했습니다.',
      solution:
        '변수 입력 폼을 아코디언 형태로 재설계했습니다. 기본 상태에서는 변수명과 설정된 값만 한 줄로 표시하고, 클릭하면 펼쳐져서 "데이터 연결" 선택 메뉴와 "대체 텍스트" 입력 필드가 구분되어 나타나도록 했습니다. 아이콘으로 설정/미설정 상태를 시각적으로 표현하고, 에러가 있으면 빨간색으로 강조했습니다.',
      result:
        '변수가 10개 이상 있어도 화면이 깔끔하게 유지되고, 사용자는 수정하려는 변수만 펼쳐서 집중할 수 있게 되었습니다. 변수 설정 오류율이 주 5건 → 0건으로 감소했습니다.',
    },
  ],
  learnings: [
    '레거시 데이터 정규화 패턴: 배열 형식을 객체 구조로 변환하여 타입 통합',
    'Jotai를 활용한 hover 상태 관리와 React Query 데이터 우선순위 처리',
    '아코디언 UI 패턴으로 복잡한 폼 입력 경험 개선',
    '조건부 렌더링 최적화 및 불필요한 리렌더링 방지',
  ],
};
